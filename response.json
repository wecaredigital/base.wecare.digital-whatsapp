{"statusCode": 200, "operation": "help", "totalActions": 58, "actions": {"send_text": "Send a text message", "send_image": "Send an image (convenience wrapper)", "send_video": "Send a video (convenience wrapper)", "send_audio": "Send an audio file (convenience wrapper)", "send_document": "Send a document (convenience wrapper)", "send_media": "Send image/video/audio/document (generic)", "send_sticker": "Send a sticker (WebP format)", "send_location": "Send a location with coordinates", "send_contact": "Send contact cards", "send_interactive": "Send buttons or list menus", "send_reaction": "Send emoji reaction to a message", "send_reply": "Reply to a specific message (with context/quote)", "send_template": "Send a pre-approved template message", "bulk_send": "Send messages to multiple recipients", "mark_read": "Mark a message as read (blue check marks)", "remove_reaction": "Remove a reaction from a message", "delete_message": "Delete a message from DynamoDB", "resend_message": "Resend a failed message", "retry_failed_messages": "Retry all failed messages", "upload_media": "Upload S3 file to WhatsApp, get mediaId", "download_media": "Download media from WhatsApp to S3", "delete_media": "Delete uploaded media from WhatsApp", "get_media_url": "Get presigned URL for media in S3", "validate_media": "Validate if media file is supported by WhatsApp", "get_supported_formats": "Get all supported media formats with size limits", "templates": "Template admin (list, create, delete, get)", "get_templates": "Get templates for a WABA", "refresh_templates": "Force refresh templates for a WABA", "get_message": "Get a single message by ID", "get_message_by_wa_id": "Get message by WhatsApp message ID", "get_conversation": "Get a single conversation", "get_delivery_status": "Get delivery status for a message", "get_messages": "Query messages from DynamoDB", "get_conversations": "Query conversations from DynamoDB", "get_conversation_messages": "Get all messages in a conversation", "get_archived_conversations": "Get archived conversations", "get_failed_messages": "Get messages with failed delivery", "search_messages": "Search messages by text content", "get_unread_count": "Get unread message count", "get_quality": "Get phone quality ratings", "get_stats": "Get message statistics", "get_wabas": "List linked WhatsApp Business Accounts", "get_phone_info": "Get phone number details", "get_infra": "Get infrastructure configuration", "get_media_types": "Get supported media types from DynamoDB", "get_config": "Get all Lambda configuration", "update_conversation": "Update conversation (mark read, archive)", "mark_conversation_read": "Mark all messages in conversation as read", "archive_conversation": "Archive a conversation", "unarchive_conversation": "Unarchive a conversation", "export_messages": "Export messages to S3 as JSON", "refresh_quality": "Force refresh phone quality rating", "refresh_infra": "Force refresh infrastructure config", "refresh_media_types": "Force refresh media types config", "ping": "Health check / ping endpoint", "list_actions": "List all actions grouped by category", "get_best_practices": "Get best practices for using handlers", "help": "Show this help message"}, "bestPractices": {"health_checks": {"tip": "Use 'ping' for health checks before operations", "example": {"action": "ping"}, "benefit": "Verify Lambda is responsive and check enabled features"}, "media_validation": {"tip": "Use 'validate_media' before uploading to check format/size", "example": {"action": "validate_media", "mimeType": "image/jpeg", "fileSizeBytes": 1048576}, "benefit": "Avoid upload failures by pre-validating media files"}, "convenience_wrappers": {"tip": "Use convenience wrappers (send_image, send_video, etc.) for cleaner code", "example": {"action": "send_image", "metaWabaId": "xxx", "to": "+xxx", "s3Key": "path/to/image.jpg"}, "benefit": "Simpler API calls with automatic mediaType setting"}, "supported_formats": {"tip": "Use 'get_supported_formats' to show users what they can upload", "example": {"action": "get_supported_formats", "category": "image"}, "benefit": "Display allowed file types and size limits to users"}, "bulk_operations": {"tip": "Use 'bulk_send' for multiple recipients instead of looping send_text", "example": {"action": "bulk_send", "metaWabaId": "xxx", "recipients": ["+111", "+222"], "type": "text", "text": "Hello!"}, "benefit": "Single Lambda invocation for multiple messages, better performance"}, "gsi_queries": {"tip": "Use GSI queries (get_conversation_messages) instead of scans for better performance", "example": {"action": "get_conversation_messages", "phoneId": "xxx", "fromNumber": "447447840003"}, "benefit": "Faster queries using DynamoDB Global Secondary Indexes"}, "error_handling": {"tip": "Use 'get_failed_messages' and 'retry_failed_messages' for error recovery", "example": {"action": "retry_failed_messages", "limit": 10}, "benefit": "Automatic retry of failed outbound messages"}, "conversation_management": {"tip": "Use 'mark_conversation_read' to reset unread counts efficiently", "example": {"action": "mark_conversation_read", "phoneId": "xxx", "fromNumber": "447447840003"}, "benefit": "Single operation to mark all messages in conversation as read"}}, "usage": "Invoke Lambda with {\"action\": \"<action_name>\", ...params}", "examples": {"send_text": {"action": "send_text", "metaWabaId": "1347766229904230", "to": "+447447840003", "text": "Hello!"}, "send_image": {"action": "send_image", "metaWabaId": "1347766229904230", "to": "+447447840003", "s3Key": "WhatsApp/test/image.jpg", "caption": "Check this out!"}, "send_video": {"action": "send_video", "metaWabaId": "1347766229904230", "to": "+447447840003", "s3Key": "WhatsApp/test/video.mp4"}, "send_audio": {"action": "send_audio", "metaWabaId": "1347766229904230", "to": "+447447840003", "s3Key": "WhatsApp/test/audio.mp3"}, "send_document": {"action": "send_document", "metaWabaId": "1347766229904230", "to": "+447447840003", "s3Key": "WhatsApp/test/doc.pdf", "filename": "Report.pdf"}, "send_media": {"action": "send_media", "metaWabaId": "1347766229904230", "to": "+447447840003", "mediaType": "image", "s3Key": "WhatsApp/test/image.jpg"}, "send_reply": {"action": "send_reply", "metaWabaId": "1347766229904230", "to": "+447447840003", "replyToMessageId": "wamid.xxx", "text": "Reply text"}, "bulk_send": {"action": "bulk_send", "metaWabaId": "1347766229904230", "recipients": ["+447447840003"], "type": "text", "text": "Hello!"}, "validate_media": {"action": "validate_media", "mimeType": "image/jpeg", "fileSizeBytes": 1048576}, "get_supported_formats": {"action": "get_supported_formats", "category": "image"}, "get_message": {"action": "get_message", "messageId": "wamid.xxx"}, "ping": {"action": "ping"}, "list_actions": {"action": "list_actions"}, "get_best_practices": {"action": "get_best_practices"}}}